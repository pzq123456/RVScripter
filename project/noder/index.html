<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* Styling for the draggable element */
        .draggable {
            user-select: none;
            position: relative;
            background-color: #fab0b0;
            border-radius: 5px;
            width: 100px;
            text-align: center;
        }
    </style>
    <title>Draggable Demo</title>
</head>
<body>

<!-- Draggable element -->
<div class="draggable" id="draggableElement">
    Drag me!
    <button>dsjakl</button>
</div>

<script>
    let isDragging = false;
    let initialX, initialY;

    const draggableElement = document.getElementById('draggableElement');

    function handleMouseDown(e) {
        isDragging = true;
        initialX = e.clientX - draggableElement.getBoundingClientRect().left;
        initialY = e.clientY - draggableElement.getBoundingClientRect().top;

        draggableElement.style.cursor = 'grabbing';
        draggableElement.style.zIndex = 2;

        e.preventDefault();
    }

    function handleMouseMove(e) {
        if (!isDragging) return;

        const newX = e.clientX - initialX;
        const newY = e.clientY - initialY;

        draggableElement.style.transform = `translate(${newX}px, ${newY}px)`;
    }

    function handleMouseUp() {
        if (!isDragging) return;

        draggableElement.style.cursor = 'grab';
        draggableElement.style.zIndex = 1;

        isDragging = false;
    }

    // Debounce the mousemove event to reduce frequency
    const debouncedMouseMove = debounce(handleMouseMove, 10);

    draggableElement.addEventListener('mousedown', handleMouseDown);
    document.addEventListener('mousemove', debouncedMouseMove);
    document.addEventListener('mouseup', handleMouseUp);

    // Double-click event listener
    draggableElement.addEventListener('dblclick', handleDoubleClick);

    // Custom function to run on double-click
    function handleDoubleClick() {
        console.log('Element entered edit mode!');
        // Add your custom logic for entering edit mode here
    }

    // Debounce function to limit the frequency of function calls
    function debounce(func, delay) {
        let timeout;
        return function() {
            const context = this;
            const args = arguments;
            clearTimeout(timeout);
            timeout = setTimeout(() => func.apply(context, args), delay);
        };
    }
</script>
</body>
</html>
